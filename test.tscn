[gd_scene load_steps=3 format=3 uid="uid://b4vtxbq2yjiwq"]

[sub_resource type="GDScript" id="GDScript_oh4xg"]
script/source = "extends Node


@onready var file_dialog: FileDialog = $FileDialog
@onready var audio_stream_player: AudioStreamPlayer = $AudioStreamPlayer



func _on_file_dialog_file_selected(path: String) -> void:
	var music = load_mp3(path)
	audio_stream_player.stream = music
	audio_stream_player.play()


func load_mp3(path):
	var file = FileAccess.open(path, FileAccess.READ)
	var sound = AudioStreamMP3.new()
	sound.data = file.get_buffer(file.get_length())
	return sound
"

[sub_resource type="AudioStreamWAV" id="AudioStreamWAV_4tto2"]

[node name="Node" type="Node"]
script = SubResource("GDScript_oh4xg")

[node name="FileDialog" type="FileDialog" parent="."]
title = "Open a File"
position = Vector2i(300, 100)
size = Vector2i(392, 400)
visible = true
ok_button_text = "Open"
file_mode = 0
access = 2

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
stream = SubResource("AudioStreamWAV_4tto2")

[connection signal="file_selected" from="FileDialog" to="." method="_on_file_dialog_file_selected"]
